<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  
      xmlns:h="http://java.sun.com/jsf/html"  
      xmlns:f="http://java.sun.com/jsf/core"  
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">  

    <h:head>  

        <f:facet name="last">
            <style type="text/css">
                .ui-panel .ui-panel-content {
                    padding: 0;
                }
                .weekDataTable {
                    display: block;
                    width: 1220px;
                    margin: 10px auto;
                }
                .dayDataTree {
                    width: 150px;
                    float: left;
                    margin: 10px;
                }
            </style>
        </f:facet>
    </h:head>  

    <h:body>
        <p:growl id="growl" globalOnly="true" autoUpdate="true" showSummary="true" showDetail="true"/>
        <h:form id="weekForm">

            <p:panel id="weekData" header="Series Calendar" styleClass="weekDataTable">
                <ui:repeat id="daysOfweek" var="daysOfweek" value="#{mBDayView.daysOfWeek}" varStatus="status">

                    <p:tree id="dayTree" var="seriesNode" value="#{daysOfweek.dayRoot}" styleClass="dayDataTree"
                            selectionMode="single" selection="#{mBDayView.selectedSeries}"
                            draggable="true" droppable="true" dragdropScope="daydrop" >
                        <p:ajax event="dragdrop" listener="#{mBDragNDrop.onDragNDrop}" update=":weekForm:weekData"/>
                        <p:treeNode type="dayLeaf">
                            #{seriesNode.title}
                        </p:treeNode>
                    </p:tree>

                </ui:repeat>

                <p:tree id="dayTree_0" var="seriesNode" value="#{mBDayView.printDay_0()}" styleClass="dayDataTree" rendered="#{not empty mBDayView.daysOfWeek}"
                        selectionMode="single" selection="#{mBDayView.selectedSeries}"
                        draggable="true" droppable="true" dragdropScope="daydrop" >
                    <p:ajax event="dragdrop" listener="#{mBDragNDrop.onDragNDrop}" update=":weekForm:weekData"/>
                    <p:treeNode type="dayLeaf">
                        #{seriesNode.title}
                    </p:treeNode>
                </p:tree>
                <p:tree id="dayTree_1" var="seriesNode" value="#{mBDayView.printDay_1()}" styleClass="dayDataTree" rendered="#{not empty mBDayView.daysOfWeek}"
                        selectionMode="single" selection="#{mBDayView.selectedSeries}"
                        draggable="true" droppable="true" dragdropScope="daydrop" >
                    <p:ajax event="dragdrop" listener="#{mBDragNDrop.onDragNDrop}" update=":weekForm:weekData"/>
                    <p:treeNode type="dayLeaf">
                        #{seriesNode.title}
                    </p:treeNode>
                </p:tree>
                <p:tree id="dayTree_2" var="seriesNode" value="#{mBDayView.printDay_2()}" styleClass="dayDataTree" rendered="#{not empty mBDayView.daysOfWeek}"
                        selectionMode="single" selection="#{mBDayView.selectedSeries}"
                        draggable="true" droppable="true" dragdropScope="daydrop" >
                    <p:ajax event="dragdrop" listener="#{mBDragNDrop.onDragNDrop}" update=":weekForm:weekData"/>
                    <p:treeNode type="dayLeaf">
                        #{seriesNode.title}
                    </p:treeNode>
                </p:tree>
                <p:tree id="dayTree_3" var="seriesNode" value="#{mBDayView.printDay_3()}" styleClass="dayDataTree" rendered="#{not empty mBDayView.daysOfWeek}"
                        selectionMode="single" selection="#{mBDayView.selectedSeries}"
                        draggable="true" droppable="true" dragdropScope="daydrop" >
                    <p:ajax event="dragdrop" listener="#{mBDragNDrop.onDragNDrop}" update=":weekForm:weekData"/>
                    <p:treeNode type="dayLeaf">
                        #{seriesNode.title}
                    </p:treeNode>
                </p:tree>

                <div style="clear: both;"></div>
                <p:commandButton value="Update" process="@this" update="weekData" action="#{mBUpdateCalendar.update}"/>
                <p:commandButton value="Save" process="@this weekData" action="#{mBSaveCalendar.save}" rendered="#{not empty mBDayView.daysOfWeek}"/>
                <p:commandButton value="Clear" process="@this" update="weekData" action="#{mBUpdateCalendar.clear}" rendered="#{not empty mBDayView.daysOfWeek}"/>

            </p:panel>

        </h:form>

    </h:body>  
</html> 
