<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  
      xmlns:h="http://java.sun.com/jsf/html"  
      xmlns:f="http://java.sun.com/jsf/core"  
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">  

    <h:head>  

        <f:facet name="last">
            <style type="text/css">
                .ui-panel .ui-panel-content {
                    padding: 0;
                }
                .weekDataTable {
                    display: block;
                    width: 1220px;
                    margin: 10px auto;
                }
                .dayDataTree {
                    width: 150px;
                    float: left;
                    margin: 10px;
                }
            </style>
        </f:facet>
    </h:head>  

    <h:body>
        <p:growl id="growl" globalOnly="true" autoUpdate="true" showSummary="true" showDetail="true"/>
        <h:form id="weekForm">

            <p:panel id="weekData" header="Series Calendar" styleClass="weekDataTable">

                <p:ring id="weekRing" value="#{mBWeekView.daysOfWeek}" var="dayOfWeek" easing="easeInOutBack">
                    <p:outputPanel style="text-align: center;" layout="block">
                        <div style="padding: 3px;">#{dayOfWeek.day}</div>
                        <p:commandButton update=":weekForm:dayDetail" action="#{mBUpdateDay.update()}" icon="ui-icon-search" title="View" oncomplete="PF('dayDialog').show();">
                            <f:setPropertyActionListener value="#{dayOfWeek}" target="#{mBWeekView.selectedDay}" />
                        </p:commandButton>
                    </p:outputPanel>
                </p:ring>

                <p:dialog header="Day Info" widgetVar="dayDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false" width="700">

                    <p:dataTable id="dayDetail" value="#{mBDayView.seriesList}" var="series" 
                                 editable="true" draggableRows="true">
                        <f:facet name="header">#{mBDayView.seriesDay}</f:facet>
                        
                        <p:ajax event="rowEdit"/>
                        <p:ajax event="rowEditCancel"/>
                        <p:ajax event="rowReorder"/>
                        
                        <p:column width="32">
                            <p:rowEditor />
                        </p:column>
                        <p:column>
                            <p:cellEditor>
                                <f:facet name="output"><h:outputText value="#{series.title}" /></f:facet>
                                <f:facet name="input"><p:inputText value="#{series.title}" style="width:100%"/></f:facet>
                            </p:cellEditor>
                        </p:column>  
                        <p:column width="100">
                            <p:commandButton value="Torrent"/>
                        </p:column>
                        <p:column width="100">
                            <p:commandButton value="Felirat"/>
                        </p:column>
                    </p:dataTable>
                </p:dialog>

                <div style="clear: both;"></div>
                <p:commandButton value="Update" process="@this" update="weekData" action="#{mBUpdateCalendar.update}"/>
                <p:commandButton value="Save" process="@this weekData" action="#{mBSaveCalendar.save}" rendered="#{not empty mBWeekView.daysOfWeek}"/>
                <p:commandButton value="Clear" process="@this" update="weekData" action="#{mBUpdateCalendar.clear}" rendered="#{not empty mBWeekView.daysOfWeek}"/>

            </p:panel>

        </h:form>

    </h:body>  
</html> 
